"use strict";getPhotonLocations=function(e){return $("#coordinateselector-datalist").html(""),new Promise((function(o,t){var r="//photon.komoot.de/api/?q="+encodeURI(e)+"&lang=en&limit=6";$.getJSON(r).done((function(e){$.each(e,(function(e,o){$.isArray(o)&&$.each(o,(function(e,t){console.log(o,t);var r=void 0!==t.properties.name?t.properties.name:"",c=void 0!==t.properties.postcode?t.properties.postcode:"",a=void 0!==t.properties.state?t.properties.state:"",n=void 0!==t.properties.country?t.properties.country:"",i=$.grep([r,a,n,c],Boolean).join(", "),l=$("<option/>",{value:t.geometry.coordinates[1]+","+t.geometry.coordinates[0],html:i});l.click((function(e){var o=e.target.value;$("#coordinateselector-value").val(o),$("#coordinateselector-value").trigger("change"),$("#coordinateselector-datalist").hide()})),$("#coordinateselector-datalist").append(l)}))})),o("getPhotonLocations worked!")})).fail((function(e,o,r){var c=o+", "+r;console.log("Request Failed: "+c),t(Error("getPhotonLocations broke"))}))}))},valueToMarker=function(e,o,t){var r=void 0;try{var c=$("#coordinateselector-value").val().split(",");if(c[0]&&c[1]){$("#coordinateselector-lat").html(c[0]),$("#coordinateselector-lng").html(c[1]);var a=L.latLng(c[0],c[1]),n=getMarkerIcon(o,t);return(r=L.marker(a,{draggable:!1,icon:n})).addTo(e),centerMapOnMarker(e,r),r}}catch(i){}},fetchCoordinate=function(e){try{$("#coordinateselector-value").val(e.latlng.lat+","+e.latlng.lng),$("#coordinateselector-value").trigger("change")}catch(o){}},bindPrepareSearch=function(){$.each(["address","zip","city","country"],(function(e,o){$("#coordinateselector-"+o).change((function(){prepareSearch()}))}))},prepareSearch=function(){var e=[];try{void 0!==$("#coordinateselector-address").val()&&e.push($("#coordinateselector-address").val()),void 0!==$("#coordinateselector-zip").val()&&e.push($("#coordinateselector-zip").val()),void 0!==$("#coordinateselector-city").val()&&e.push($("#coordinateselector-city").val()),void 0!==$("#coordinateselector-country").val()&&e.push($("#coordinateselector-country").val()),$("#coordinateselector-search").html(e.join(" "))}catch(o){console.log(o)}},bindSearchButton=function(){$("#coordinateselector-do-search").on("click touch",(function(e){return void 0!==$("#coordinateselector-search").text()&&($("#coordinateselector-searching").show(),getPhotonLocations($("#coordinateselector-search").text()).then((function(e){$("#coordinateselector-searching").hide(),$("#coordinateselector-datalist").show()}))),!1}))};